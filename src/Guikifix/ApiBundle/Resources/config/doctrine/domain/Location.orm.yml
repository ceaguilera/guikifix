Guikifix\Core\Domain\Location:
    type: entity
    table: location
    repositoryClass: Guikifix\ApiBundle\Repository\LocationRepository

    id:
        id:
          type: integer
          generator:
            strategy: AUTO
    fields:
        # Título o nombre de la localidad
        title:
            type: string
            nullable: false
            length: 255
        # Nivel de la localidad
        lvl:
            type: integer
            nullable: true
        # slug / nombre sin caracteres especiales 
        # ni espacios
        slug:
            type: string
            nullable: true

    oneToMany:
        # Localidad hijas
        children:
            targetEntity: Guikifix\Core\Domain\Location
            mappedBy: parent
            orderBy:
              title: ASC
            cascade: ["persist"]
        # usuario relacionados a una localidad
        users_profile:
            targetEntity: Guikifix\Core\Domain\UserProfile
            mappedBy: jobs
        # trabajos relacionados a una localidad
        jobs:
            targetEntity: Guikifix\Core\Domain\Job
            mappedBy: location   
    manyToOne:
        # Localidad de nivel superior
        parent:
            targetEntity: Location
            inversedBy: children
            joinColumns:
                parent_id:
                    referencedColumnName: id
            orphanRemoval: false       
            cascade: ["persist"]
        # País de origen la localidad
        root:
            targetEntity: Location
            joinColumns:
                root_id:
                    referencedColumnName: id
            orphanRemoval: false       
            cascade: ["persist"]